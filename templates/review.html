<!doctype html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Set Review Harian</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
  </head>
  <body>
    <div class="container">
      <header class="site-head">
        <div class="brand">
          <div class="logo">MA</div>
          <div>
            <div class="brand-inner">
              <span class="brand-dots" aria-hidden="true">
          <span class="brand-dot b1"></span>
          <span class="brand-dot b2"></span>
          <span class="brand-dot b3"></span>
          <span class="brand-dot b4"></span>
              </span>
                  </div>
                </div>
              </div>
              <div class="top-actions muted">&nbsp;</div>
              <div class="theme-toggle" title="Toggle theme" aria-hidden="false">
                <button id="theme-toggle-btn" aria-label="Toggle dark mode" class="btn btn-ghost">
                  <svg id="theme-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"></path>
                  </svg>
                </button>
              </div>
        <div>
          <h1>Set Review Harian untuk <code>+62{{ phone_display }}</code></h1>
          <div class="lead muted">Ubah teks review yang akan dikirim setiap hari.</div>
        </div>
      </header>

    <form method="post">
      <input type="hidden" name="phone" value="{{ phone_display }}" />
      <table>
        <thead>
          <tr>
            <th>Hari</th>
            <th>Review Text</th>
          </tr>
        </thead>
        <tbody>
          {% for key, label in days %}
          <tr>
            <td>{{ label }}</td>
            <td><input type="text" name="{{ key }}" value="{{ reviews.get(key, '') }}" placeholder="Teks review untuk {{ label }}" /></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <div class="actions">
        <button class="btn btn-primary" type="submit">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Simpan
        </button>
        <a class="btn btn-ghost" href="/">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M10 19l-7-7 7-7" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M3 12h18" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Batal
        </a>
      </div>
    </form>
    <footer class="mt-8 muted">Kembali ke <a href="/">halaman utama</a>.</footer>
    <!-- Compact-only: no theme toggle JS required -->
    <script>
      // small theme init for pages without the bigger index script
      (function(){
        const themeToggleBtn = document.getElementById('theme-toggle-btn');
        const themeIcon = document.getElementById('theme-icon');
        function setTheme(isDark){
          if (isDark) document.body.classList.add('dark'); else document.body.classList.remove('dark');
          try{ localStorage.setItem('theme', isDark ? 'dark' : 'light'); }catch(e){}
          if (!themeIcon) return;
          if (isDark){
            themeIcon.innerHTML = '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"></path>';
          } else {
            themeIcon.innerHTML = '<circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="1.4"></circle> <path d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path>';
          }
        }

        try{ var stored = localStorage.getItem('theme'); }catch(e){ stored = null }
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        const dark = (stored === 'dark') || (stored === null && prefersDark);
        setTheme(dark);

        if (themeToggleBtn){
          themeToggleBtn.addEventListener('click', function(){
            const isDark = document.body.classList.toggle('dark');
            setTheme(isDark);
            themeToggleBtn.classList.add('clicked');
            setTimeout(()=> themeToggleBtn.classList.remove('clicked'), 220);
          });
        }
      })();
    </script>
    </div>
  </body>
</html>
